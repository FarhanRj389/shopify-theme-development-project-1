{% style %}
.hero-slider {
position: relative;
overflow: hidden;
}


.hero-slide {
display: none;
align-items: center;
justify-content: center;
min-height: {{ section.settings.height }}px;
background-size: cover;
background-position: center;
}

.hero-slide[data-image-fit="cover"]{
    background-size: cover;
}
.hero-slide[data-image-fit="contain"]{
    background-size: contain;
    background-repeat: no-repeat;
}
.hero-slide[data-image-fit="fill"]{
    background-size: 100% 100%;
}

.hero-slide.active {
display: flex;
}


.hero-content {
text-align: {{ section.settings.text_align }};
color: {{ section.settings.text_color }};
max-width: 600px;
}


.hero-btn {
display: inline-block;
margin-top: 15px;
padding: 12px 30px;
background: {{ section.settings.button_bg }};
color: {{ section.settings.button_text_color }};
text-decoration: none;
}


.hero-arrow {
position: absolute;
top: 50%;
transform: translateY(-50%);
background: transparent;
border: none;
color: {{ section.settings.arrow_color }};
font-size: 30px;
padding: {{ section.settings.arrow_padding }}px;
cursor: pointer;
}


.hero-arrow.prev {
left: 10px;
}


.hero-arrow.next {
right: 10px;
}
.hero-content{
    text-align: {{ section.settings.text_align }};
    color: {{ section.settings.text_color }};
    max-width: 600px;

    padding-top: var(--pt, 20px);
    padding-right: var(--pr, 20px);
    padding-bottom: var(--pb, 20px);
    padding-left: var(--pl, 20px);
}
{% endstyle %}

<div class="hero-slider" data-autoplay="{{ section.settings.autoplay }}" >
    {% for block in section.blocks %}
        <div class="hero-slide {% if forloop.first %}active{% endif %}" data-image-fit="{{ block.settings.image_fit }}"
            style="background-image: url('{{ block.settings.image | image_url}}');">
            <div class="hero-content" 
                style=
                "--pt: {{ block.settings.padding_top }}px; 
                 --pr: {{ block.settings.padding_right }}px; 
                 --pb: {{ block.settings.padding_bot }}px; 
                 --pl: {{ block.settings.padding_left }}px;">
                <h1>{{ block.settings.heading }}</h1>
                <p>{{ block.settings.text }}</p>
                {% if block.settings.button_label != blank %}
                    <a href="{{ block.settings.button_link }}" class=" button hero-btn">
                        {{ block.settings.button_label }}
                    </a>
                {% endif %}
            </div>
        </div>
    {% endfor %}

    {% if section.settings.show_arrows %}
        <button class="hero-arrow prev">&#10094;</button>
        <button class="hero-arrow next">&#10095;</button>
    {% endif %}
</div>

<script>
(
    function(){
        let slider = document.querySelector('.hero-slider');
        let slides = slider.querySelectorAll('.hero-slide');
        let index = 0;

        function showslider(i){
            slides.forEach(s => s.classList.remove('active'));
            slides[i].classList.add('active');
        }

        slider.querySelector('.next')?.addEventListener('click', ()=>{
            index = (index + 1) % slides.length;
            showslider(index);
        });

        slider.querySelector('.prev')?.addEventListener('click', ()=>{
            index = (index -1 + slides.length) % slides.length;
            showslider(index);
        });
    
        if(slider.dataset.autoplay == 'true'){
            setInterval(() =>{
                index = (index + 1) % slides.length;
                showslider(index);
            }, 5000);
        }
    }
)();
</script>

{%  schema  %} 
    {
        "name": "Hero Section",
        "settings": [
            {
                "type": "range",
                "id": "height",
                "label": "Slider Height",
                "min": 300,
                "max": 900,
                "step": 50,
                "default": 500
            },
            {
                "type": "color",
                "id": "text_color",
                "label": "Text Color",
                "default": "#ffffff"
            },
            {
                "type": "select",
                "id": "text_align",
                "label": "Text Alignment",
                "options": [
                    { "value": "left" , "label": "Left"},
                    { "value": "center" , "label": "Center"},
                    { "value": "right" , "label": "Right"}
                ],
                "default": "center"
            },
            {
                "type": "color",
                "id": "button_bg",
                "label": "Button Backgound",
                "default" : "#000000"
            },
            {
                "type": "color",
                "id": "button_text_color",
                "label": "Button Text Color",
                "default": "#ffffff"
            },
            {
                "type": "checkbox",
                "id": "show_arrows",
                "label": "Show Navigation Arrows",
                "default": true
            },
            {
                "type": "color",
                "id": "arrow-color",
                "label": "Arrow Color",
                "default": "#ffffff"
            },
            {
                "type": "range",
                "id": "arrow_padding",
                "label": "Arrow Padding",
                "min": 5,
                "max": 30,
                "step": 5,
                "default": 10
            },
            {
                "type": "checkbox",
                "id": "autoplay",
                "label": "Enable Autoplay",
                "default": true
            }

        ],
        "blocks": [
            {
                "type": "slide",
                "name": "Slide",
                "settings": [
                    {
                        "type": "image_picker",
                        "id": "image",
                        "label": "Slide Image"
                    },
                    {
                        "type": "text",
                        "id": "heading",
                        "label": "Heading",
                        "default": "Hero Heading"
                    },
                    {
                        "type": "textarea",
                        "id": "text",
                        "label": "Content",
                        "default": "Hero Desctpion"
                    },
                    {
                        "type": "select",
                        "id": "image_fit",
                        "label": "Image Fit",
                        "options": [
                            {"value": "cover", "label": "Cover"},
                            {"value": "contain", "label": "Contain"},
                            {"value": "fill", "label": "Fill"}
                        ], 
                        "default": "cover"
                    },
                    {
                        "type": "range",
                        "id": "padding_top",
                        "label": "Padding Top",
                        "min": 0,
                        "max": 150,
                        "step": 5,
                        "default": 20
                    },
                    {
                        "type": "range",
                        "id": "padding_right",
                        "label": "Padding Right",
                        "min": 0,
                        "max": 150,
                        "step": 5,
                        "default": 20
                    },
                    {
                        "type": "range",
                        "id": "padding_bot",
                        "label": "Padding Bottom",
                        "min": 0,
                        "max": 150,
                        "step": 5,
                        "default": 20
                    },
                    {
                        "type": "range",
                        "id": "padding_left",
                        "label": "Padding Left",
                        "min": 0,
                        "max": 150,
                        "step": 5,
                        "default": 20
                    },
                    {
                        "type": "text",
                        "id": "button_label",
                        "label": "Button Label",
                        "default": "Shop Now"
                    },
                    {
                        "type": "url",
                        "id": "button_link",
                        "label": "Button Link"
                    }
                ]
            }
        ],
        "max_blocks": 5,
        "presets": [
            {
                "name": "Hero Slider",
                "category": "Hero"
            }
        ]
    }
 {% endschema %} 